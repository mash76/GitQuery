<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>GitQuery</title>
    <link href="./style.css" rel="stylesheet" type="text/css" />
  </head>
  <body>

    <!-- header -->
    <div class="underline" style="padding:3px;">
      <table width="100%" style="padding:0px;margin:0px;">
        <tr>
          <td width="50%" valign="top" >
            <span id="version" class="gray" >**version**</span>
            <span onClick="toggleDevTools()" class="btn" >devTools</span>
            <span onClick="$('#nodejs_info').slideToggle(10)" class="btn" >node-<span id="node_version"></span></span>
            <span onClick="toggleFullScreen()" class="btn" >full</span>
            <span onClick="$('#shortcut').slideToggle(10)" class="btn" >shortcut</span>
            <span onClick="osRunOut('rm ' + _G.save_path + '/*', 'debug_out','replace')" class="btn" >delCache</span>
            <span onClick="osRunOut('git help -a', 'command_list','replace'); $('#command_list').slideToggle(10)" class="btn" >commandList</span>

          </td>
          <td width="50%" align="right" >
            <span id="g_user" class="gray" ></span>
            <span onClick="$('#gitconf').toggle();" class="btn">globalSettings</span>
          </td>
        </tr>
      </table>

      <div id="command_list" class="detail hide"></div>
      <div id="shortcut" class="detail hide">
          Com 1  - Repository List  <br/>
          <br/>
          Repo <br/>
          Com 2  - BranchList<br/>
          Com O  - OpenWith Finder,Atom,Sublime <br/>
          <br/>
          Branch <br/>
          Com 3  - Status <br/>
          Com 4  - File Search<br/>
          Com 5  - Commit Log <br/>
          <br/>
          Develop <br/>
          Com D  - JS DeveloperConsole <br/>


      </div>
      <div id="nodejs_info" class="detail hide"></div>
      <div id="gitconf" class="hide code detail" style="text-align:left;"></div>

      <div class="m5">
          <span onClick="toggleTopPanes('local_repo_pane','toggle')" class="btn bold s120" >Repositories<span id="repo_count" class="s120"></span></span>
          <span onClick="showGitInit();" class="btn" >init</span>
          <span onClick="showGitClone();" class="btn" >clone</span>
          <span id="his_repo"></span>
      </div>
    </div>


    <!-- pane top -->
    <div id="gitinit_pane" pane="top" class="detail hide">
        init<br/>
        <div id="init_recommend_path" ></div>
        <input id="init_path" type="text" size="40" placeholder="init_path" />
        <input id="init_name" type="text" placeholder="project_name" />
        <button onClick="gitInit()" />init</button>
        <div id="init_result" type="text"  /></div>
    </div>

    <div id="gitclone_pane" pane="top" class="detail hide">
        git crone from remote<br/>
        <div id="clone_recommend_path" ></div>
        <input id="clone_dir"  type="text" size=50 placeholder="clone_dir" /><br/>
        <input id="clone_url"  type="text" size=80 placeholder="clone_url" />
        <div id="clone_result" type="text" /></div>
        <br/>
                <button onClick="osRunOut('git -C ' + $('#clone_dir').val() + ' clone ' + $('#clone_url').val() ,'clone_result','replace')" />clone</button>
        <br/>
    </div>

    <div id="local_repo_pane" pane="top" class="detail hide" >
      <input type="text" id="filter_l_repo" size=20 placeholder ="repository name"/>
      <span onclick="findLocalRepos('refresh')" class="btn">reload</span>
      <div id="local_repo_list"></div>
    </div>

    <!-- current repository  -->

    <div id="repo_info" class="m10 hide">

        <span class="silver">MainRepo</span> 
        <span id="main_repo_name"></span> 
        <span class="silver">submodules</span>
        <span id="submodules_list"></span>

        <table><tr><td valign=top>

            <span id="current_repo_name" class="bold s170">**current_repo**</span>
            <span id="current_repo_size" onClick="repoDiskSize(); toggleRepoDescPanes('pane_reposize','toggle')" class="bold s150 btn">**current_repo_size**</span>
            <span onClick="toggleRepoDescPanes('pane_delete','toggle')" class="btn red">delete</span>
            <br/>

            <a id="current_repo_path" href="javascript:void(0);" onClick="$('#repo_edit_pane').slideToggle(10);" class="gray">**current_repo_path**</a>
            <br/>
            <div class="detail hide" id="repo_edit_pane">
                Open with
                <a id="btn_open_finder"href="javascript:void(0);" onClick="osrun('open ' + path2dir(_G.current_repo_path) ); $('#repo_edit_pane').slideUp(10);"  class="btn ">finder</a>
                <a id="btn_open_atom" href="javascript:void(0);" onClick="osrun('/Applications/Atom.app/Contents/Resources/app/atom.sh ' + path2dir(_G.current_repo_path) ); $('#repo_edit_pane').slideUp(10);"  class="btn ">atom</a>
                <a id="btn_open_sublime2" href="javascript:void(0);" onClick="osrun('/Applications/Sublime\\ Text\\ 2.app/Contents/SharedSupport/bin/subl ' + path2dir(_G.current_repo_path) ); $('#repo_edit_pane').slideUp(10);"  class="btn ">sublime2</a>
                <a id="btn_open_sublime3" href="javascript:void(0);" onClick="osrun('/Applications/Sublime\\ Text.app/Contents/SharedSupport/bin/subl ' + path2dir(_G.current_repo_path) ); $('#repo_edit_pane').slideUp(10);"  class="btn ">sublime3</a>
            </div>
            <span onClick="showBranchList('replace','list'); toggleRepoDescPanes('local_branch','toggle') " >
              <span class="btn">branch</span><span id="local_branch_ct" class="btn s120 bold">**local_branch_ct**</span>
            </span>

            <span id="ignore_btncolor" class="btn_silver">
                <span onClick="showIgnore(); toggleRepoDescPanes('pane_ignore','toggle')" >ignore</span>
            </span>

            <span id="hook_btncolor" class="btn_silver">
                <span onClick="showHooks(); toggleRepoDescPanes('pane_hooks','toggle')" >hooks</span>
            </span>

            <span id="submodule_btncolor" class="btn_silver">
              <span onClick="showGitmodules('replace'); toggleRepoDescPanes('pane_submodule','toggle')" >submodule</span><span id="submodule_count" class="s120 bold">**submodule_count**</span>
            </span>


            <span id="stash_btncolor" class="btn_silver">
              <span onClick="showStashList('replace'); toggleRepoDescPanes('pane_stash','toggle')" >stash</span><span id="stash_count" class="s120 bold"></span>
            </span>
            <span onClick="showConfig(); toggleRepoDescPanes('pane_config','toggle')" class="btn">config</span>
            <span onClick="showDotGit(); toggleRepoDescPanes('pane_dotgitfiles','toggle')" class="btn">.git-files</span>

        </td><td valign=top >

            <div id="remote_btncolor_1" class="btn_silver" >
                <span onClick="osRunOut('git fetch','pane_remote_detail','replace'); openPaneCenter('pane_remote')" class="s120">< fetch</span>
                <br/>
                <span onClick="osRunOut('git pull' ,'pane_remote_detail','replace'); openPaneCenter('pane_remote')" class="s120">< pull</span>
                <br/>
                <span onClick="osRunOut('git push' ,'pane_remote_detail','replace'); openPaneCenter('pane_remote')" class="s120">> push </span>
                <br/>
            </div>

        </td><td valign=top>

            <!-- remote -->
            <div id="remote_btncolor_2" class="btn_silver" style="background:#ffffdd;">
                <span onClick="showRemoteRepos('replace'); toggleRepoDescPanes('pane_remote','toggle')" class="s120 bold">Remote</span>
                <br/>
                <span id="remote_menu">
                    <span onClick="osRunOut('git branch -r','pane_re_branch','replace'); toggleRepoDescPanes('pane_re_branch','toggle')" >
                      branch<span id="remote_branch_ct" class="s120 bold">**remote_branch_ct**</span>
                    </span>
                </span>
            </div>
        </td></tr></table>

        <!-- pane repo -->f

        <div id="local_branch" pane="repo" class="code hide detail" >
            new branch <span class="silver s80">git branch branchname01   </span><br/>

            <a href="javascript:void(0);" onClick="$('#branch_name').val('feature/').focus()">feature</a> 
            <a href="javascript:void(0);" onClick="$('#branch_name').val('hotfix/').focus()">hotfix</a> 
            <a href="javascript:void(0);" onClick="$('#branch_name').val('release/').focus()">release</a><br/>

            <input id="branch_name" type="text" placeholder="branch_name" />
            <button onClick="osRunOut('git branch \'' + $('#branch_name').val() + '\'','local_branch_details','replace',function(){ showBranchList('append','list'); toggleRepoDescPanes('local_branch','down') });" />add</button>

            <div class="vm10 fMenu underline">
              <span onClick="showBranchList('replace','list'); toggleRepoDescPanes('local_branch','down') " class="btn s120">list</span>
              <span onClick="showBranchList('replace','tree'); toggleRepoDescPanes('local_branch','down') " class="btn s120">tree</span>
              &nbsp;&nbsp;
              <span class="silver">
                <span onClick="$(this).attr('class','bold gray')" >currentBranch</span>
                <span onclick="$(this).attr('class','bold gray')" >allBranch</span>
              </span>

            </div>
            <div id="local_branch_details" ></div>
        </div>
        <div id="pane_stash" pane="repo" class="code hide detail" >
            <div id="pane_stash_list" ></div>
            <div id="pane_stash_detail" ></div>

        </div>
        <div id="pane_hooks" pane="repo" class="code hide detail" >
            <div id="hooks_list"  ></div>
            <br/>
            <div id="hooks_detail" ></div>

        </div>
        <div id="pane_submodule" pane="repo" class="code hide detail" >
          new submodule <span class="silver s80">git submodule url://.../.git name01 </span><br/>
          <input id="submodule_url" type="text" placeholder="submodule_url" size="80"  />
          <input id="submodule_name" type="text" placeholder="submodule_name" />
          <button onClick="gitSubmoduleAdd() " placeholder="git command" />add</button>
          <div id="submodule_details" ></div>

        </div>
        <div id="pane_config" pane="repo" class="code hide detail" >
        </div>

        <div id="pane_dotgitfiles" pane="repo" class="code hide detail" >
          <span onClick="$('div[name=file_detail]').toggle();" class="btn">toggle中身</span>
          <div id="dotgitfiles_detail" class="underline"> </div>
        </div>


        <div id="pane_delete" pane="repo" class="code hide detail" >
            <span class="red s150 bold">Danger.</span>
            <span class="red">No going back. Please be certain.</span>
            <br/>

            delete .git directry<br/>
            <input id="delete_name_git" type="text" placeholder="repository_name" />
            <button onClick="delGit(_G.current_repo_path, $('#delete_name_git').val())" />delete</button>
            <br/>
            delete repo Directory<br/>
            <input id="delete_name_dir" type="text" placeholder="repository_name" />
            <button onClick="delDir(_G.current_repo_path, $('#delete_name_dir').val())" />delete</button>
            <br/>
            <div id="pane_delete_detail" ></div>
            Re-Init repo Directory<br/>
            <input id="reinit_name_dir" type="text" placeholder="repository_name" />
            <button onClick="reInitDir(_G.current_repo_path, $('#reinit_name_dir').val())" />delete</button>
            <br/>
            <div id="pane_delete_detail" ></div>
        </div>


        <div id="pane_ignore" pane="repo" class="code hide detail" >
            <textarea id="ignore_edit" cols="50" rows="12" ></textarea>
            <button onClick="updateIgnore($('#ignore_edit').val())"  />update</button>


            <div id="pane_ignore_detail"  ></div>
        </div>
        <div id="pane_remote" pane="repo" class="code hide detail" >
            new remote <span class="silver s80">git remote add branchname01 https://..../.git   </span>
            <a onClick="osrun('open https://github.com')" class="btn">github</a> 
            <a onClick="osrun('open https://bitbucket.org')" class="btn">bitbucket</a> 
            <br/>
            <input id="remote_name" type="text" placeholder="remote_name" />
            <input id="remote_url" type="text" placeholder="remote_url" />
            <button onClick="gitRemoteAdd()"  />add</button>
            <br/>
            <div id="pane_remote_detail" ></div>

        </div>
        <div id="pane_re_branch" pane="repo" class="code hide detail" >
        </div>
        <div id="pane_reposize" pane="repo" class="detail code">
        </div>

        <!-- current branch -->

        <span id="c_branch" class="s170 bold">**c_branch**</span>
        <span id="latest_commit" class="s80 gray">97f809b  4 minutes ago </span>

          <a href="javascript:void(0)" onClick="makePaneStatus('replace'); openPaneCenter('pane_status');" class="btn">
              status<span id="br_status_ct" class="bold s150">**br_status_ct**</span>
          </a>

          <a href="javascript:void(0)" onClick="makePaneFilelist(''); openPaneCenter('pane_filelist');" >
              files<span id="br_files_ct" class="bold s150">**br_files_ct**</span>
          </a>
          <a href="javascript:void(0)" onClick="makePaneLog('','line') " >
              commit<span id="br_commit_ct" class="bold s150">**br_commit_ct**</span>
          </a>
          <a href="javascript:void(0)" onClick="makePaneUser(''); openPaneCenter('pane_user');" >
              comitter<span id="br_member_ct" class="bold s150">**br_member_ct**</span>
          </a>

        <span onClick="openPaneCenter('pane_gitcommand'); $('#git_usercommand').focus() "  class="btn ">git_command</span>


        <!-- pane center -->

        <div id="pane_gitdiff" pane="center" class="detail code">
            gitdiff
            <div id="pane_gitdiff_detail" ></div>
        </div>

        <div id="pane_gitcommand" pane="center" class="detail code">

            <span class="gray">
                <span onClick="$('#git_usercommand').val('GIT_TRACE_SETUP=true '); $('#git_usercommand').focus() " class="btn" >GIT_TRACE_SETUP=true</span> git status   #gitが見つけた基準dirを全部表示<br/>
                <span onClick="$('#git_usercommand').val('GIT_TRACE_PERFORMANCE=true '); $('#git_usercommand').focus() " class="btn" >GIT_TRACE_PERFORMANCE=true</span> git status   #各Commandの処理時間を表示<br/>
                <span onClick="$('#git_usercommand').val('GIT_TRACE_PACKET=true '); $('#git_usercommand').focus() " class="btn" >GIT_TRACE_PACKET=true</span> git ls-remote origin   # 中身のcurlをパケット単位で追跡<br/>
                <span onClick="$('#git_usercommand').val('GIT_TRACE_PACK_ACCESS=true '); $('#git_usercommand').focus() " class="btn" >GIT_TRACE_PACK_ACCESS=true</span> git status   # packファイル gitの内部のアクセスを表示<br/>
                <span onClick="$('#git_usercommand').val('GIT_TRACE=true '); $('#git_usercommand').focus() " class="btn" >GIT_TRACE=true</span> git stash list  # 内部Commandへの、内部エイリアスの変換の順路を表示<br/><br/>
            </span>

            <input id="git_usercommand" type="text" size="70" placeholder="git command" />
            <button onClick="osRunOut($('#git_usercommand').val(),'pane_gitcommand_detail','replace')" placeholder="git command" />run</button>
            <br/>
            
            <div id="pane_gitcommand_info"></div>            
            <div id="pane_gitcommand_detail"></div>
        </div>

        <div id="pane_status" pane="center" class="detail code">

          <div class="vm10 fMenu s150 btn">

              <span id="btn_st_status" href="javascript:void(0);" onClick=" setSelectBold(this); makePaneStatus('replace'); togglePaneStatus('pane_status_status','toggle') " class="">status</span>
              <span id="btn_st_add" href="javascript:void(0);" onClick=" setSelectBold(this); gitAdd(); togglePaneStatus('pane_status_status','toggle')" class="">add</span>
              <span id="btn_st_reset" href="javascript:void(0);" onClick=" setSelectBold(this); gitReset(); togglePaneStatus('pane_status_status','toggle')" class="">reset</span>
              <span id="btn_st_commit" href="javascript:void(0);" onClick=" setSelectBold(this); togglePaneStatus('pane_status_commit','toggle')" class="">commit</span>
              <span id="btn_st_stash" href="javascript:void(0);" onClick=" setSelectBold(this); togglePaneStatus('pane_status_stash','toggle')" class="">stash</span>
              <span id="btn_st_clean" href="javascript:void(0);" onClick=" setSelectBold(this); prepareGitClean(); togglePaneStatus('pane_status_clean','toggle')" class="">clean</span>
              <span id="btn_st_debug" onClick="togglePaneStatus('pane_status_debug','toggle'); "  class="">debug</span>

          </div>
          <div id="pane_status_status" pane="status" class="hide"> 
          </div>         
          <div id="pane_status_commit" pane="status" class="hide">
              commit<br/>
              <input id="commit_msg" type="text" placeholder="commit_msg name" />
              <button onClick="osRunOut('git commit -m \'' + $('#commit_msg').val() + '\'','pane_status_detail','replace'); makePaneStatus('append'); " placeholder="commit message" />commit</button>
              <br/>
          </div>
          <div id="pane_status_stash" pane="status" class="hide">
              stash <span class="silver s80">git stash comment01 </span><br/>
              <input id="stash_comment" type="text" placeholder="stash comment" />
              <button onClick="osRunOut('git stash save \'' + $('#stash_comment').val() + '\'','pane_status_detail','replace',function(){ makePaneStatus('append');showStashList('replace'); }); " />stash</button>
          </div>
          <div id="pane_status_clean" pane="status" class="hide">
              clean
              <button onClick="runGitClean()" >clean</button>
          </div>
          <div id="pane_status_debug" pane="status" class="hide">
              <span onClick="debugEditAndCommit()" class="btn s150" >edit>add>Commit</span><br/>
              <span onClick="debugEditAndStash()" class="btn s150" >edit>add>Stash</span><br/>
              <span onClick="debugEditAndAdd()" class="btn s150" >edit>add</span><br/>
              <span onClick="debugEditAndAdd()" class="btn s150" >edit</span>

              <div id="pane_debug_detail"></div>
          </div>


          <div id="pane_status_detail"></div>
        </div>

        <div id="pane_file" pane="center" class="detail code">
            File or Dir history<br/>
            <input type="text" id="filter_file" value="" size=60 placeholder="set path" >
            <button onClick="makePaneFileStat($('#filter_file').val()) " />stash</button>

            <div id="pane_file_filename" >  </div>
            <div id="pane_file_desc" >  </div>
            <div id="pane_file_detail_1" >  </div>
            <div id="pane_file_detail_2" >  </div>
        </div>

        <div id="pane_filelist" pane="center" class="detail code">
                <table ><tr><td valign=top >
                    Dir<br/>
                    <span id="pane_filelist_detail" >   </span>
                </td><td valign=top >
                      File<br/>
                      <span id="pane_filelist_ext" >   </span><br/>
                      <input type="text" id="filter_filelist" value="" size=20 >

                      <span class="s80 gray">RecentCommit</span>

                      <span onClick="makePaneFilelist( $('#filter_filelist').val() , 'git diff HEAD~5 HEAD --name-only ')" class="btn ">〜5c</span>
                      <span onClick="makePaneFilelist( $('#filter_filelist').val() , 'git diff HEAD~10 HEAD --name-only ')" class="btn ">10c</span>
                      <span onClick="makePaneFilelist( $('#filter_filelist').val() , 'git diff HEAD~30 HEAD --name-only ')" class="btn ">30c</span>
                      <span onClick="makePaneFilelist( $('#filter_filelist').val() , 'git diff HEAD~100 HEAD --name-only ')" class="btn ">100c</span>
                      <br/>

                      <span id="pane_filelist_detail_r" >  </span>
                </td></tr></table>
        </div>

        <div id="pane_diff" pane="center" class="detail code">
          <input type="text" id="filter_diff" value="" size=20 >
          <div id="pane_diff_detail"></div>
        </div>

        <div id="pane_log" pane="center" class="detail code ">
            <div class="vm10 fMenu underline">


                <span class="btn s150">
                   <a href="javascript:void(0);" onClick="setSelect(this);
                                                          _G.log_lineOrTree='line'; 
                                                          makePaneLog($('#filter_log').html(),_G.log_lineOrTree )" class="bold">line</a>
                   <a href="javascript:void(0);" onClick="
                                                         setSelect(this);
                                                          _G.log_lineOrTree='tree'; 
                                                          makePaneLog($('#filter_log').html(),_G.log_lineOrTree)" >tree</a>
                </span>


                <span >
                    branch: 
                    <a href="javascript:void(0);" class="silver bold" onClick="
                                                setSelect(this);
                                                _G.log_all='';
                                                makePaneLog($('#filter_log').html(),_G.log_lineOrTree) 
                                                " >current</a>
                    <a href="javascript:void(0);" class="silver" onclick="
                                                setSelect(this);
                                                _G.log_all=' --all ';
                                                makePaneLog($('#filter_log').html(),_G.log_lineOrTree)
                                                " >all</a>
                </span>
                <span>
                  remote:
                  local inclideRemote
                </span>
                <span>
                  sort: 
                  parentChild time
                </span>
            </div>

            <input type="text" id="filter_log" value="" size=20 placeholder="filter" >
            <div id="pane_log_detail"></div>

        </div>

        <div id="pane_user" pane="center" class="detail code">
            <input type="text" id="filter_user" value="" size=20 >
            <div id="pane_user_detail"></div>
        </div>

        <div id="pane_commit" pane="center" class="detail code">

        </div>

        <div id="real_files"></div>
        <div id="debug_out" style="detail"></div>
         <div id="kakugen" ></div>

    </div>
  </body>

  <script>

    require('./renderer.js')
    require('./js/functions.js')
    require('./js/debug.js')

    // You can also require other files to run in this process
     require('./js/repository.js')
     require('./js/center.js')
     require('./js/init.js')

    </script>
</html>
